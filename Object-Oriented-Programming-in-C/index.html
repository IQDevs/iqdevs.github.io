<!DOCTYPE html>
<html>
  <head>
    <title>Object Oriented Programming in C – IQDevs – Technology Excellence Redefined</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="Before C++ was officially called C++, it was called “C with Classes” for reasons obvious to anyone who has dealt with both languages. Yet, C still not only widely used but is also the preferred language to many. Why that is the case is not what I’m here to address today. That might be the topic to another blog post.

" />
    <meta property="og:description" content="Before C++ was officially called C++, it was called “C with Classes” for reasons obvious to anyone who has dealt with both languages. Yet, C still not only widely used but is also the preferred language to many. Why that is the case is not what I’m here to address today. That might be the topic to another blog post.

" />
    
    <meta name="author" content="IQDevs" />

    
    <meta property="og:title" content="Object Oriented Programming in C" />
    <meta property="twitter:title" content="Object Oriented Programming in C" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link rel="alternate" type="application/rss+xml" title="IQDevs - Technology Excellence Redefined" href="/feed.xml" />
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>

  </head>

  <body>


    <div class="intro-header">
      <div class="container">
        <div class="post-heading">
            <h1>Object Oriented Programming in C</h1>
            <span class="meta">Posted by <a href="https://github.com/alkass"> Fadi Hanna Al-Kass
            </a> on March 14, 2018
            </span>
        </div>

      </div>
    </div>


    <div id="main" role="main" class="container">
      <article class="post">
 <div class="space-extra-small">
 </div>

  <div class="entry">
    <p>Before C++ was officially called C++, it was called “<a href="http://www.cplusplus.com/info/history/">C with Classes</a>” for reasons obvious to anyone who has dealt with both languages. Yet, C still not only widely used but is also the preferred language to many. Why that is the case is not what I’m here to address today. That might be the topic to another blog post.</p>

<p>What I’m here to discuss today, however, are a few ways to have some of the features and characteristics of C++ in C, and we shall begin with the OOP model. After you will have read this blog post, you will be able to mimic ………..</p>

<p>Structs in C take the most basic form of an objects. They can contain a group of object-related characteristics together. For instance, a newborn baby’s object may contain the following fields of data:</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">date_of_birth</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span> <span class="c1">// format: MIN:HR MM-DD-YYYY
</span>  <span class="kt">float</span> <span class="n">weight</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">blood_type</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">}</span> <span class="n">Baby</span><span class="p">;</span>
</code></pre>
</div>

<blockquote>
  <p>I write <code class="highlighter-rouge">typedef struct {...} Baby;</code> instead of <code class="highlighter-rouge">struct Baby {...};</code> so I can use <code class="highlighter-rouge">Baby baby;</code> to declare a <code class="highlighter-rouge">Baby</code> object instead of <code class="highlighter-rouge">struct Baby baby;</code>. I find the first form cleaner than the latter.</p>
</blockquote>

<p>You might be used to implementing a toString function that takes stringifies an object for you, e.g.:</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="kt">char</span><span class="o">*</span> <span class="nf">toString</span><span class="p">(</span><span class="n">Baby</span><span class="o">*</span> <span class="n">baby</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">char</span><span class="o">*</span> <span class="n">str</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">Baby</span><span class="p">));</span>
  <span class="n">sprintf</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="s">"{ %s, %s, %2lf, %s }"</span><span class="p">,</span> <span class="n">baby</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">baby</span><span class="o">-&gt;</span><span class="n">date_of_birth</span><span class="p">,</span> <span class="n">baby</span><span class="o">-&gt;</span><span class="n">weight</span><span class="p">,</span> <span class="n">baby</span><span class="o">-&gt;</span><span class="n">blood_type</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">str</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<p>And now, to stringify our <code class="highlighter-rouge">Baby</code> object, we’d need the do to the following:</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;stdio.h&gt;  // Needed for printf
#include &lt;stdlib.h&gt; // Needed for sprintf
</span>
<span class="kt">char</span><span class="o">*</span> <span class="nf">toString</span><span class="p">(</span><span class="n">Baby</span><span class="o">*</span> <span class="n">baby</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">char</span><span class="o">*</span> <span class="n">str</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">Baby</span><span class="p">));</span>
  <span class="n">sprintf</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="s">"{ %s, %s, %.1lf, %s }"</span><span class="p">,</span> <span class="n">baby</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">baby</span><span class="o">-&gt;</span><span class="n">date_of_birth</span><span class="p">,</span> <span class="n">baby</span><span class="o">-&gt;</span><span class="n">weight</span><span class="p">,</span> <span class="n">baby</span><span class="o">-&gt;</span><span class="n">blood_type</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">str</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Baby</span> <span class="n">baby</span> <span class="o">=</span> <span class="p">{</span><span class="s">"John Smith"</span><span class="p">,</span> <span class="s">"47:12 01-12-2017"</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s">"O+"</span><span class="p">};</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">toString</span><span class="p">(</span><span class="o">&amp;</span><span class="n">baby</span><span class="p">));</span>
<span class="p">}</span>
</code></pre>
</div>

<p>A problem arises when your <code class="highlighter-rouge">Baby</code> object is part of a system (say, a Hospital) where <code class="highlighter-rouge">Doctor</code> and <code class="highlighter-rouge">Nurse</code> objects not only exist, but also want to have a stringify mechanism implemented. You’d normally end up writing a separate <code class="highlighter-rouge">toString</code> function for each object, e.g.: <code class="highlighter-rouge">babyToString</code>, <code class="highlighter-rouge">doctorToString</code>, and <code class="highlighter-rouge">nurseToString</code>.</p>

<p>Another option that’s also available is a generic <code class="highlighter-rouge">toString</code> function; one that takes a generic object of any type and finds a way to deal with it. The most basic form of a generic object in <code class="highlighter-rouge">C</code> is a <code class="highlighter-rouge">void*</code> object. Functions that take <code class="highlighter-rouge">void*</code> as a parameter can essentially receive an object of any type. What you’d then do is pass a second parameter whose job is to help the <code class="highlighter-rouge">toString</code> function identify the <code class="highlighter-rouge">void*</code> object to the best of its ability. Your <code class="highlighter-rouge">toString</code> function would look something like this:</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;string.h&gt; // Needed for strcpy
</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
  <span class="n">BABY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">}</span> <span class="n">ObjectType</span><span class="p">;</span>

<span class="kt">char</span><span class="o">*</span> <span class="nf">toString</span><span class="p">(</span><span class="n">Baby</span><span class="o">*</span> <span class="n">baby</span><span class="p">,</span> <span class="n">ObjectType</span> <span class="n">obj_type</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">char</span><span class="o">*</span> <span class="n">str</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">));</span> <span class="c1">// Allows up to 512 characters/bytes
</span>  <span class="k">switch</span> <span class="p">(</span><span class="n">obj_type</span><span class="p">)</span> <span class="p">{</span>
    <span class="nl">default:</span>
      <span class="n">strcpy</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="s">"Unable to identify object"</span><span class="p">);</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="n">BABY</span><span class="p">:</span>
      <span class="n">sprintf</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="s">"{ %s, %s, %.1lf, %s }"</span><span class="p">,</span> <span class="n">baby</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">baby</span><span class="o">-&gt;</span><span class="n">date_of_birth</span><span class="p">,</span> <span class="n">baby</span><span class="o">-&gt;</span><span class="n">weight</span><span class="p">,</span> <span class="n">baby</span><span class="o">-&gt;</span><span class="n">blood_type</span><span class="p">);</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="c1">// More cases can be added here
</span>  <span class="p">}</span>
  <span class="k">return</span> <span class="n">str</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

  </div>

  
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'iqdevs';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

</article>


    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
            <div class="svg-icon">
          



<a href="https://github.com/iqdevs"><i class="icon-github icon-2x"></i></a>









            </div>
        </footer>
      </div>
    </div>


    

  </body>
</html>
